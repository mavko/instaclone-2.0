(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{78581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(97507)}])},30377:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});var r=(0,n(2804).cn)({key:"modalState",default:!1})},37673:function(e,t,n){"use strict";var r=n(85893),s=(n(67294),n(25675)),a=n(63801),i=n(63153),l=n(33299),c=n(11163),o=n(2804),u=n(30377);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,s=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){s=!0,a=c}finally{try{r||null==l.return||l.return()}finally{if(s)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}t.Z=function(){var e=(0,l.useSession)().data,t=d((0,o.FV)(u.e),2),n=(t[0],t[1]),m=(0,c.useRouter)();return(0,r.jsx)("div",{className:"shadow-sm bg-black sticky top-0 z-50 sm:px-5",children:(0,r.jsxs)("div",{className:"flex justify-between max-w-5xl mx-5 md:mx-auto xl:mx-auto",children:[(0,r.jsx)("div",{onClick:function(){return m.push("/")},className:"relative hidden lg:inline-grid w-24 cursor-pointer",children:(0,r.jsx)(s.default,{src:"/assets/img/instagram_logo.svg",layout:"fill",objectFit:"contain",className:"w-10 h-10"})}),(0,r.jsx)("div",{onClick:function(){return m.push("/")},className:"relative w-7 lg:hidden flex-shrink-0 cursor-pointer text-white",children:(0,r.jsx)(s.default,{src:"/assets/img/instagram_logo_icon.svg",layout:"fill",objectFit:"contain"})}),(0,r.jsx)("div",{className:"max-w-xs",children:(0,r.jsxs)("div",{className:"relative mt-1 p-3 rounded-md",children:[(0,r.jsx)("div",{className:"absolute inset-y-0 pl-3 flex items-center pointer-events-none",children:(0,r.jsx)(a.W1M,{className:"h-5 w-5 text-gray-500"})}),(0,r.jsx)("input",{className:"bg-gray-50 block w-full pl-10 sm:text-sm border-gray-300 focus:ring-black focus:border-black rounded-xl",type:"text",placeholder:"Search",name:"",id:""})]})}),e?(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[(0,r.jsx)(i.tvw,{onClick:function(){return m.push("/")},className:"navBtn text-white"}),(0,r.jsx)(a.Oqj,{className:"h-6 text-white md:hidden cursor-pointer"}),(0,r.jsxs)("div",{className:"relative navBtn",children:[(0,r.jsx)(a.kBi,{className:"navBtn text-white"}),(0,r.jsx)("div",{className:"absolute -top-2 -right-2 text-xs w-5 h-5 text-white bg-red-500 rounded-full flex items-center justify-center",children:"3"})]}),(0,r.jsx)(a.wl8,{onClick:function(){return n(!0)},className:"navBtn text-white"}),(0,r.jsx)(a.vxs,{className:"navBtn text-white"}),(0,r.jsx)(a.h_8,{className:"navBtn text-white"}),(0,r.jsx)("img",{onClick:l.signOut,src:e.user.image,alt:"Profile picture",className:"h-10 w-10 rounded-full cursor-pointer"})]})}):(0,r.jsx)("button",{onClick:l.signIn,className:"text-white",children:"Sign in"})]})})}},97507:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return M}});var r=n(85893),s=n(9008),a=n(85384),i=n.n(a),l=n(33299),c=n(67294);var o=function(e){var t=e.img,n=e.username;return(0,r.jsxs)("div",{className:"py-5",children:[(0,r.jsx)("img",{className:"h-14 w-14 rounded-full p-[1.5px] border-red-500 border-2 object-contain cursor-pointer hover:scale-110 transition transform duration-200 ease-out",src:t,alt:""}),(0,r.jsx)("p",{className:"text-xs w-14 truncate",children:n})]})};function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var m=function(){var e,t,n=(0,c.useState)([]),s=n[0],a=n[1],m=(0,l.useSession)().data;return(0,c.useEffect)((function(){var e=d(Array(20)).map((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){u(e,t,n[t])}))}return e}({},i().helpers.contextualCard(),{id:t})}));a(e)}),[]),(0,r.jsxs)("div",{className:"flex space-x-2 bg-gray-800 text-white pa-15 px-5 rounded-xl overflow-x-scroll scrollbar-thin scrollbar-thumb-white scroll",children:[l.useSession&&(0,r.jsx)(o,{img:null===m||void 0===m||null===(e=m.user)||void 0===e?void 0:e.image,username:null===m||void 0===m||null===(t=m.user)||void 0===t?void 0:t.username}),s.map((function(e){return(0,r.jsx)(o,{img:e.avatar,username:e.username},e.id)}))]})},f=n(19),x=n(15503),h=n(96257),p=n(33404),v=((0,x.C6)().length?(0,x.Mq)():(0,x.ZF)({apiKey:"AIzaSyCzk3rc1CRAmzLfZY4DTvzPbpN9kOe05DU",authDomain:"insta-2-yt-fb62d.firebaseapp.com",projectId:"insta-2-yt-fb62d",storageBucket:"insta-2-yt-fb62d.appspot.com",messagingSenderId:"630575294243",appId:"1:630575294243:web:0c7ea54addf3d5f1570e96"}),(0,h.ad)()),b=(0,p.cF)(),j=n(35666),g=n.n(j),y=n(63801),w=n(63153),N=n(94803),k=n.n(N);function S(e,t,n,r,s,a,i){try{var l=e[a](i),c=l.value}catch(o){return void n(o)}l.done?t(c):Promise.resolve(c).then(r,s)}function O(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function i(e){S(a,r,s,i,l,"next",e)}function l(e){S(a,r,s,i,l,"throw",e)}i(void 0)}))}}var C=function(e){var t=e.id,n=e.username,s=e.userImg,a=e.img,i=e.caption,o=(0,l.useSession)().data,u=(0,c.useState)(""),d=u[0],m=u[1],x=(0,c.useState)([]),h=x[0],p=x[1],b=(0,c.useState)([]),j=b[0],N=b[1],S=(0,c.useState)([!1]),C=S[0],I=S[1];(0,c.useEffect)((function(){return(0,f.cf)((0,f.IO)((0,f.hJ)(v,"posts",t,"comments"),(0,f.Xo)("timestamp","desc")),(function(e){return p(e.docs)}))}),[v]),(0,c.useEffect)((function(){return(0,f.cf)((0,f.IO)((0,f.hJ)(v,"posts",t,"likes")),(function(e){return N(e.docs)}))}),[v,t]);var A=O(g().mark((function e(){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!C){e.next=5;break}return e.next=3,deleteDoc((0,f.JU)(v,"posts",t,"likes",o.user.uid));case 3:e.next=7;break;case 5:return e.next=7,(0,f.pl)((0,f.JU)(v,"posts",t,"likes",o.user.uid),{username:o.user.username});case 7:case"end":return e.stop()}}),e)})));(0,c.useEffect)((function(){return I(-1!==j.findIndex((function(e){var t;return e.id===(null===o||void 0===o||null===(t=o.user)||void 0===t?void 0:t.uid)})))}),[j]);var E=O(g().mark((function e(n){var r;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r=d,m(""),e.next=5,(0,f.ET)((0,f.hJ)(v,"posts",t,"comments"),{comment:r,username:o.user.username,userImage:o.user.image,timestamp:(0,f.Bt)()});case 5:case"end":return e.stop()}}),e)})));return(0,r.jsxs)("div",{className:" my-7 rounded-lg bg-gray-900",children:[(0,r.jsxs)("div",{className:"flex items-center space-between py-4 pl-3 pr-5",children:[(0,r.jsx)("img",{src:s,className:"rounded-full h-10 w-10 object-contain border border-red-500 p-1 mr-3"}),(0,r.jsx)("p",{className:"flex-1 font-bold text-white",children:n}),(0,r.jsx)(y.nWS,{className:"h-5 text-white"})]}),(0,r.jsx)("img",{src:a,className:"object-cover w-full"}),o&&(0,r.jsxs)("div",{className:"flex justify-between p-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-start space-x-5",children:[C?(0,r.jsx)(w.h_8,{onClick:A,className:"text-red-500 btn"}):(0,r.jsx)(y.h_8,{onClick:A,className:"text-white btn"}),(0,r.jsx)(y.kBi,{className:"text-white btn"}),(0,r.jsx)(y.Rdq,{className:"text-white btn rotate-45"})]}),(0,r.jsx)(y.plf,{className:"text-white btn"})]}),(0,r.jsxs)("p",{className:"px-5 truncate text-white",children:[j.length>0&&(0,r.jsxs)("p",{className:"font-bold mb-1",children:[j.length," likes"]}),(0,r.jsx)("span",{className:"font-bold mr-2",children:n}),(0,r.jsx)("br",{}),i]}),h.length>0&&(0,r.jsx)("div",{className:"ml-5 mt-3 h-20 overflow-y-scroll scrollbar-thumb-black scrollbar-thin",children:h.map((function(e){var t;return(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,r.jsx)("img",{src:e.data().userImage,alt:"",className:"h-7 rounded-full"}),(0,r.jsxs)("p",{className:"text-sm flex-1",children:[(0,r.jsx)("span",{className:"font-weight-bold text-gray-300 mr-3",children:e.data().username}),"",(0,r.jsx)("span",{className:"text-gray-400",children:e.data().comment})]}),(0,r.jsx)(k(),{fromNow:!0,className:"pr-5 text-xs",children:null===(t=e.data().timestamp)||void 0===t?void 0:t.toDate()})]},e.id)}))}),o&&(0,r.jsxs)("form",{className:"flex items-center p-4",children:[(0,r.jsx)(y.OdW,{className:"text-white h-7"}),(0,r.jsx)("input",{type:"text",value:d,onChange:function(e){return m(e.target.value)},placeholder:"Add a comment..",className:"border-none flex-1 focus:ring-0 outline-none bg-gray-700 mx-2 rounded-xl"}),(0,r.jsx)("button",{type:"submit",disabled:!d.trim(),onClick:E,className:"text-blue-400 font-semibold",children:"Post"})]})]})};var I=function(){var e=(0,c.useState)([]),t=e[0],n=e[1];return(0,c.useEffect)((function(){return(0,f.cf)((0,f.IO)((0,f.hJ)(v,"posts"),(0,f.Xo)("timestamp","desc")),(function(e){n(e.docs)}))}),[v]),(0,r.jsx)("div",{children:t.map((function(e){return(0,r.jsx)(C,{id:e.id,username:e.data().username,userImg:e.data().profileImg,img:e.data().image,caption:e.data().caption},e.id)}))})};var A=function(){var e,t,n=(0,l.useSession)().data;return(0,r.jsxs)("div",{className:"flex items-center mt-14 ml-10 justify-between",children:[(0,r.jsx)("img",{className:"w-16 h-16 rounded-full border-2 p-[1.5px]",src:null===n||void 0===n||null===(e=n.user)||void 0===e?void 0:e.image}),(0,r.jsxs)("div",{className:"flex-1 mx-4",children:[(0,r.jsx)("h2",{className:"text-white font-bold",children:null===n||void 0===n||null===(t=n.use)||void 0===t?void 0:t.username}),(0,r.jsx)("h3",{className:"text-gray-100 font-sm",children:"Welcome to Instagram"})]}),(0,r.jsx)("button",{onClick:l.signOut,className:"text-blue-400",children:"Sign out"})]})};function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var P=function(){var e=(0,c.useState)([]),t=e[0],n=e[1];return(0,c.useEffect)((function(){var e=_(Array(5)).map((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){E(e,t,n[t])}))}return e}({},i().helpers.contextualCard(),{id:1})}));n(e)}),[]),(0,r.jsxs)("div",{className:"mt-4 ml-10",children:[(0,r.jsxs)("div",{className:"flex justify-between text-sm mb-5",children:[(0,r.jsx)("h3",{className:"text-sm font-bold text-gray-300",children:"Suggestions"}),(0,r.jsx)("button",{className:"text-blue-400 font-semibold",children:"See all"})]}),t.map((function(e){return(0,r.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,r.jsx)("img",{src:e.avatar,className:"w-10 h-10 border p-[2px] rounded-full"}),(0,r.jsxs)("div",{className:"flex-1 flex justify-between ml-4",children:[(0,r.jsxs)("div",{className:"mr-5",children:[(0,r.jsx)("h2",{className:"font-semibold text-sm text-white",children:e.username}),(0,r.jsxs)("h3",{className:"text-xs text-gray-100",children:["Works at ",e.company.name]})]}),(0,r.jsx)("button",{className:"text-blue-400",children:"Follow"})]})]},e.id)}))]})};var F,T,B=function(){var e=(0,l.useSession)().data;return(0,r.jsxs)("main",{className:"grid grid-cols-1 md:grid-cols-1 md:max-w-2xl xl:grid-cols-2 xl:max-w-5xl mx-auto ".concat(!e&&"!grid-cols-1 !max-w-3xl"),children:[(0,r.jsxs)("section",{children:[(0,r.jsx)(m,{}),(0,r.jsx)(I,{})]}),e&&(0,r.jsx)("section",{className:"hidden xl:inline-grid md:col-span-1",children:(0,r.jsxs)("div",{className:"fixed",children:[(0,r.jsx)(A,{}),(0,r.jsx)(P,{})]})})]})},D=n(37673),J=n(2804),R=n(30377),U=n(35131),z=n(36518),V=n(90774);function W(e,t,n,r,s,a,i){try{var l=e[a](i),c=l.value}catch(o){return void n(o)}l.done?t(c):Promise.resolve(c).then(r,s)}function X(e){return function(){var t=this,n=arguments;return new Promise((function(r,s){var a=e.apply(t,n);function i(e){W(a,r,s,i,l,"next",e)}function l(e){W(a,r,s,i,l,"throw",e)}i(void 0)}))}}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,s=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(c){s=!0,a=c}finally{try{r||null==l.return||l.return()}finally{if(s)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var L=function(){var e=(0,l.useSession)().data,t=q((0,J.FV)(R.e),2),n=t[0],s=t[1],a=(0,c.useRef)(null),i=(0,c.useState)(null),o=i[0],u=i[1],d=(0,c.useRef)(null),m=(0,c.useState)(!1),x=m[0],h=m[1],p=X(g().mark((function t(){var n,r;return g().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!x){t.next=2;break}return t.abrupt("return");case 2:return h(!0),t.next=5,(0,f.ET)((0,f.hJ)(v,"posts"),{username:e.user.username,caption:d.current.value,profileImg:e.user.image,timestamp:(0,f.Bt)()});case 5:return n=t.sent,console.log("New doc added with ID",n.id),r=(0,V.iH)(b,"posts/".concat(n.id,"/image")),t.next=10,(0,V.sf)(r,o,"data_url").then(X(g().mark((function e(t){var s;return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,V.Jt)(r);case 2:return s=e.sent,e.next=5,(0,f.r7)((0,f.JU)(v,"posts",n.id),{image:s});case 5:case"end":return e.stop()}}),e)}))));case 10:s(!1),h(!1),u(null);case 13:case"end":return t.stop()}}),t)})));return(0,r.jsx)(U.u.Root,{show:n,as:c.Fragment,children:(0,r.jsx)(z.V,{as:"div",className:"fixed z-10 inset-0 overflow-y-auto",onClose:s,children:(0,r.jsxs)("div",{className:"flex items-end justify-center min-h-[800px] sm:min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,r.jsx)(U.u.Child,(F={as:c.Fragment},Z(F,"as","ref"),Z(F,"enter","ease-out duration-300"),Z(F,"enterFrom","opacity-0"),Z(F,"enterTo","opacity-100"),Z(F,"leave","ease-in duration-200"),Z(F,"leaveFrom","opacity-100"),Z(F,"leaveTo","opacity-0"),Z(F,"children",(0,r.jsx)(z.V.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})),F)),(0,r.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"&#8203"}),(0,r.jsxs)(U.u.Child,(T={as:c.Fragment},Z(T,"as","ref"),Z(T,"enter","ease-out duration-300"),Z(T,"enterFrom","opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"),Z(T,"enterTo","opacity-100 translate-y-0 sm:scale-100"),Z(T,"leave","ease-in duration-200"),Z(T,"leaveFrom","opacity-100 translate-y-0 sm:scale-100"),Z(T,"leaveTo","opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"),Z(T,"children",[(0,r.jsx)(z.V.Overlay,{className:"fixed inset-0 bg-black bg-opacity-75 transition-opacity"}),(0,r.jsx)("div",{className:"inline-block align-middle bg-black rounded-2xl px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm-align-middle sm:max-w-sm sm:w-full sm:p-6",children:(0,r.jsxs)("div",{children:[o?(0,r.jsx)("img",{src:o,onClick:function(){return u(null)},alt:"",className:"object-contain cursor-pointer w-full"}):(0,r.jsx)("div",{onClick:function(){return a.current.click()},className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 cursor-pointer",children:(0,r.jsx)(y.xmR,{className:"h-6 w-6 text-red-600","aria-hidden":"true"})}),(0,r.jsx)("div",{className:"mt-3 text-center sm:mt-5",children:(0,r.jsx)(z.V.Title,{as:"h3",className:"text-lg text-white leading-6 font-medium",children:"Upload a photo"})}),(0,r.jsx)("div",{children:(0,r.jsx)("input",{ref:a,type:"file",hidden:!0,onChange:function(e){var t=new FileReader;e.target.files[0]&&t.readAsDataURL(e.target.files[0]),t.onload=function(e){u(e.target.result)}}})}),(0,r.jsx)("div",{className:"mt-5",children:(0,r.jsx)("input",{type:"text",className:"border-2 rounded-full focus:ring-0 w-full text-center bg-transparent",ref:d,placeholder:"Your post caption.."})}),(0,r.jsx)("div",{className:"mt-5 sm:mt-6 text-center",children:(0,r.jsxs)("button",{type:"button",disabled:!o,onClick:p,className:"inline-flex justify-center w-full p-2 pl-5 pr-5 bg-white border-2 border-white text-black rounded-full transition-colors duration-700 transform focus:border-4 focus:border-white disabled:bg-gray-300 disabled:cursor-not-allowed",children:[x?"Uploading post...":"Upload post",(0,r.jsx)(y.rG2,{className:"h-6 w-5 ml-1"})]})})]})})]),T))]})})})};function M(){return(0,r.jsxs)("div",{className:"bg-black h-screen overflow-y-scroll scrollbar-hide",children:[(0,r.jsxs)(s.default,{children:[(0,r.jsx)("title",{children:"Instagram 2.0 clone"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),(0,r.jsx)(L,{}),(0,r.jsx)(D.Z,{}),(0,r.jsx)(B,{})]})}}},function(e){e.O(0,[885,43,16,337,648,774,888,179],(function(){return t=78581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);